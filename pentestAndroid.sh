#!/bin/bash
mkdir AndroidPentesting
cd AndroidPentesting
curl https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip -o commandlinetools.zip
curl https://dl.google.com/android/repository/platform-tools-latest-linux.zip -o platformtools.zip
git clone https://github.com/m0bilesecurity/Frida-Mobile-Scripts.git
unzip commandlinetools.zip
unzip platformtools.zip
echo "\n[+]Done Downloading and extracting khbar la android\n"
echo "[-]Installing frida-tools and scripts"
pip3 install frida-tools
curl https://github.com/frida/frida/releases/download/16.4.2/frida-server-16.4.2-android-x86.xz -o fridaServerx86.xz
cd cmdline-tools
mkdir latest
mv bin latest;mv NOTICE.txt latest;mv lib latest;mv source.properties latest
cd latest/bin
./sdkmanager --install system-images\;android-29\;google_apis\;x86
./avdmanager create avd -k "system-images;android-29;google_apis;x86" -n "android_29"
cd ../../../
mkdir platforms
rm commandlinetools.zip
rm platformtools.zip
echo "DONE"
echo "Add the below in your .zshrc or .bashrc file accordingly"
echo "[+] export ANDROID_HOME=/PATH-TO/AndroidPentesting/android_sdk"
echo "[+] export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools"
echo "You can run the emulator by navigating to emulator and using the command ./emulator -avd android_29 -scale 0.6 -writable-system"
echo "Extract the frida server and place it with adb push on the emulated machines /data/local/tmp directory and run it"
echo "Use the other downloaded scripts to unpin the certificiate and have fun"
